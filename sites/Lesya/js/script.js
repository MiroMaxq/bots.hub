!function(f,a){var p=io(),g,h,d,e=[1,14,"qiwi"],k=function(a){return String(a).replace(/\B(?=(\d{3})+(?!\d))/g,".")},l=function(){a("#vk_widget").html('<div id="vk_groups"></div>');VK.Widgets.Group("vk_groups",{mode:3,width:"auto"},158861435)};History.enabled&&(a(".url").on("click",function(){var c=a(this).attr("href")+"?e=true";a.ajax({url:c,type:"GET",contentType:"application/json",success:function(a){if(a.redirect)return location.href=a.redirect;a.error||History.pushState(a,a.title,a.href)}});
return!1}),History.Adapter.bind(f,"statechange",function(){var c=History.getState().data,b=c.html;a(".content").html(b);l();m();a('.nav-link[href="/auth"]').remove();a(".nav-item").removeClass("active");a('.nav-item[href="'+c.href+'"]').addClass("active")}));var m=function(){var c=!1;a('a[href="#nick"]').on("click",function(){a("#snick,#bnick").attr("contenteditable",c=!c)});a("#snick,#bnick").attr({onPaste:"return false",onDrop:"return false"});a("#snick,#bnick").on("keypress",function(b){13===b.which&&
(a("#snick,#bnick").attr("contenteditable",c=!1).text(a(b.currentTarget).text().replace(/s+/g," ")),a.ajax({url:"api/changeNick",data:{nick:a(b.currentTarget).text()}}),b.preventDefault());40<a(b.currentTarget).text().length&&b.preventDefault()});a("#url").on("input, change",function(){clearTimeout(g);localStorage.userUrl=a("#url").val();a("#uInfo").text("Загрузка...");g=setTimeout(function(){if(!a("#url").val())return a("#uInfo").text("Введите ссылку на вашу страницу VK!");
a.ajax({url:"/api/user",data:{vid:a("#url").val()},type:"GET",contentType:"application/json",timeout:2E3,success:function(b){if(b.error)return a("#next").prop("disabled",!0),d=null,a("#url").attr("class","form-control is-invalid"),a("#uInfo").text("Введена неправильная ссылка!");a("#uInfo").html('Страница пользователя: <a href="https://vk.com/id'+
b.id+'" target="_blank">'+b.first_name+" "+b.last_name+"</a>");d=b.id;a("#next").prop("disabled",!1);a("#url").attr("class","form-control is-valid")},error:function(){d=null;a("#uInfo").text("Не удалось проверить ссылку...")}})},500)});localStorage.userUrl&&!a("#url").val()&&a("#url").val(localStorage.userUrl);a("#url").val()&&a("#url").trigger("change");a('[data-toggle="tooltip"]').tooltip();
a("#next").click(function(){if(!d)return a("#next").prop("disabled",!0),a("#uInfo").text("Заполните все поля правильно!");parseInt(a("#rub").val())||a("#rub").val(14);a.ajax({url:"/api/geURL",data:JSON.stringify({account:d,selected:e}),type:"POST",contentType:"application/json",timeout:2E3,success:function(b){b.url?location.href=b.url:a("#uInfo").text("Ошибка, попробуйте позже...")},
error:function(){return a("#uInfo").text("Ошибка, попробуйте позже...")}})});a("#select").on("change",function(){1==this.value?a("#calc").slideDown(333):a("#calc").slideUp(333);e[0]=this.value});"1"!=a("#select").val()&&a("#calc").slideUp(0);a("#rub").on("input",function(){clearTimeout(h);var b=a("#rub").val();if(15E3<b)a("#rub").val(15E3);else if(1>b)return a("#money").val("0$");h=setTimeout(function(){a.ajax({url:"/api/calcDonate",
data:{rub:a("#rub").val()},type:"GET",contentType:"application/json",timeout:1500,success:function(b){a("#money").val(k(b.money)+"$");a("#money").attr("class","form-control is-valid");a("#rub").attr("class","form-control is-valid");e[1]=b.rub}})},500)});a("#qiwi,#webmoney,#card,#yandex,#mc").click(function(b){b=a(b.currentTarget);a("#choice").html(b.html());e[2]=b.attr("id")})},n={};p.on("update",function(c){var b={},d;for(d in c)b.$jscomp$loop$prop$i$1=d,a({numberValue:n[b.$jscomp$loop$prop$i$1]||
0}).animate({numberValue:n[b.$jscomp$loop$prop$i$1]=c[b.$jscomp$loop$prop$i$1]},{duration:2E3,step:function(b){return function(c){return a("#"+b.$jscomp$loop$prop$i$1).html(k(Math.ceil(c)))}}(b)}),b={$jscomp$loop$prop$i$1:b.$jscomp$loop$prop$i$1}});m();a(f).on("load resize",l)}(window,$);